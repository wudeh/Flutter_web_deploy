import{_ as K,d as Q,r,s as U,T as P,a as R,A as Z,o as ee,w,c as u,e as _,j as t,u as l,t as g,n as v,G as se,i as M,k as te,F as oe,z as le,l as X,q as ie,H as ne,I as B,J as re}from"./index.105eb99a.js";import{_ as ae}from"./share.56451215.js";import{B as ue,_ as _e}from"./core.esm.ccae187d.js";import{_ as fe}from"./songInfo.ee9e09a9.js";import{_ as de}from"./play_white.b19edd9c.js";import{g as S}from"./num.de8f9d34.js";import{d as ve}from"./download.47019da3.js";var ce="/Flutter_web_deploy/assets/arrow_down.7cf71c80.svg",H="/Flutter_web_deploy/assets/volume.c8ee860b.svg",me="/Flutter_web_deploy/assets/needle.60c17542.png",ge="/Flutter_web_deploy/assets/like_white.446989e4.svg",pe="/Flutter_web_deploy/assets/sing.5fe37645.svg",ye="/Flutter_web_deploy/assets/comment_num.7683d72f.svg",be="/Flutter_web_deploy/assets/circulate.dae8c7da.svg",we="/Flutter_web_deploy/assets/circulate_random.f0fea622.svg",he="/Flutter_web_deploy/assets/circulate_one.50becdd2.svg",O="/Flutter_web_deploy/assets/last_song.50462e9f.svg",ke="/Flutter_web_deploy/assets/stop_white.e331bfd5.svg",Ce="/Flutter_web_deploy/assets/list_white.9fd8f699.svg";const Fe={class:"popup"},$e={class:"song_pop"},Te={class:"bg_blur"},Le=["src"],Pe={class:"nav"},Me={class:"title"},Be={class:"name"},Se={class:"author"},Ae={class:"img"},De={class:"middle"},Ee=["src"],We={key:0},xe=["id","innerHTML"],Re={class:"icon_top"},Xe={class:"comment_num"},He={class:"progress"},Oe={class:"current_time"},qe={class:"durasion"},ze={class:"bottom_icon"},Ie={name:"song"},Ne=Q({...Ie,setup(Ve){const p=ie();r(0);const s=U();s.song_info.id===""&&(P("\u4F60\u53EF\u771F\u662F\u4E2A\u5C0F\u57FA\u4F6C"),p.push({name:"404"}));const f=r(!1),m=r(!1),k=r(!0);R([]);const C=r(!0);let A=r();const F=r(0);let c=r(0);const d=r(""),$=r(),h=r(),y=r();let a=R({bs:""});const q=()=>{p.go(-1)},z=()=>{ve(s.song_info.url,{id:s.song_info.id,name:s.song_info.name,author:s.song_info.author})},D=async()=>{try{let e=(await ne(s.song_info.id,0,1,20,3,"")).data.totalCount;e>=100&&e<1e3?d.value="99+":e>=1e3&&e<1e4?d.value="999+":e===1e4?d.value="1w":e>1e4&&e<1e5?d.value="1w+":e>=1e5?d.value="10w+":d.value=d.value.toString()}catch{P("\u83B7\u53D6\u6B4C\u8BCD\u51FA\u9519")}},I=()=>{p.push({path:"/comment",query:{id:s.song_info.id,type:s.song_info.type}})};Z(()=>{s.song_info.id||p.push("/")}),ee(async()=>{$.value.style.width=`${s.song_info.buffered/s.song_info.duration*100}%`,a.bs=new ue(".lyric",{probeType:2,momentum:!1,scrollX:!1,scrollY:!0,click:!0,disableTouch:!1}),a.bs.on("beforeScrollStart",()=>{}),a.bs.on("scroll",n=>{m.value=!0;let e=Math.abs(n.y)/A.value.children[0].offsetHeight;c.value=s.song_info.lyricAll[Math.ceil(e)-1<=0?0:Math.ceil(e)-1].time}),a.bs.on("scrollEnd",()=>{m.value&&s.set_progress_time(c.value),m.value=!1}),a.bs.disable(),s.song_info.id&&!d.value&&D()}),w(()=>s.song_info.lyricAll.length,()=>{B(()=>{a.bs.refresh()})}),w(()=>s.song_info.id,n=>{n!=""&&D()}),w(()=>p.currentRoute.value.name,n=>{n!="song"?C.value=!1:C.value=!0}),w(()=>s.song_info.currentTime,()=>{C.value&&!m.value&&(c.value=s.song_info.currentTime,s.song_info.lyricAll.forEach((n,e,o)=>{c.value>=n.time&&c.value<=o[e+1].time&&a.bs.scrollToElement(`#s${e}`,100)})),k.value&&(h.value.style.left=`${s.song_info.currentTime/s.song_info.duration*100}%`)}),w(()=>s.song_info.buffered,()=>{$.value.style.width=`${s.song_info.buffered/s.song_info.duration*100}%`});function E(){s.play(!s.song_info.isPlaying),B(()=>{a.bs.refresh()})}const W=()=>{f.value=!f.value,B(()=>{a.bs.refresh()}),f.value?a.bs.enable():(a.bs.disable(),m.value=!1)};r(!1);const N=n=>{k.value=!1;let e=y.value.offsetWidth,i=(n.touches[0].clientX-y.value.offsetLeft)/e;F.value=s.song_info.duration*i,i>=0&&i<=1&&(h.value.style.left=`${i*100}%`)},V=n=>{let e=y.value.offsetWidth,i=(n.touches[0].clientX-y.value.offsetLeft)/e;F.value=s.song_info.duration*i,i>=0&&i<=1&&(h.value.style.left=`${i*100}%`)},j=n=>{k.value=!0,s.set_progress_time(F.value)},b=r(),T=r(),L=r(),G=n=>{let e=b.value.offsetWidth,i=(n.touches[0].clientX-b.value.offsetLeft)/e;i>=0&&i<=1&&(s.set_volume(parseFloat(i.toFixed(1))),L.value.style.left=`${i*100}%`,T.value.style.width=`${i*100}%`)},J=n=>{let e=b.value.offsetWidth,i=(n.touches[0].clientX-b.value.offsetLeft)/e;i>=0&&i<=1&&(s.set_volume(parseFloat(i.toFixed(1))),L.value.style.left=`${i*100}%`,T.value.style.width=`${i*100}%`)},Y=()=>{let n={id:s.song_info.id,name:s.song_info.name,author:s.song_info.author,img:s.song_info.img,type:s.song_info.type,isSongClik:!0,al:s.song_info.al};s.set_pop_detail(n)},x=()=>{P("\u656C\u8BF7\u671F\u5F85")};return(n,e)=>(u(),_("div",Fe,[t("div",$e,[t("div",Te,[t("img",{src:l(s).song_info.img,alt:""},null,8,Le)]),t("div",Pe,[t("div",{class:"back"},[t("img",{src:ce,onClick:q,alt:""})]),t("div",Me,[t("div",Be,g(l(s).song_info.name),1),t("div",Se,g(l(s).song_info.author),1)]),e[19]||(e[19]=t("div",{class:"share",style:{opacity:"0"}},[t("img",{src:ae,alt:""})],-1))]),t("div",{class:v(["volume",{hidden:!f.value}])},[e[22]||(e[22]=t("div",{class:"img"},[t("img",{src:H,alt:""})],-1)),t("div",{class:"line",ref_key:"volume_line",ref:b,onTouchstart:e[0]||(e[0]=o=>G(o)),onTouchmove:e[1]||(e[1]=o=>J(o))},[t("div",{class:"past",ref_key:"volume_linePast",ref:T},null,512),t("div",{class:"circle_point",ref_key:"volume_point",ref:L},null,512),e[20]||(e[20]=t("div",{class:"not_play"},null,-1))],544),se(t("div",Ae,e[21]||(e[21]=[t("img",{src:H,alt:""},null,-1)]),512),[[re,!1]])],2),f.value?M("",!0):(u(),_("img",{key:0,class:v(["needle",{needle_play:l(s).song_info.isPlaying,hidden:f.value}]),src:me,alt:""},null,2)),t("div",{class:v(["rotate",{hidden:f.value}]),style:te({animationPlayState:l(s).song_info.isPlaying?"running":"paused"}),onClick:e[2]||(e[2]=o=>W())},[t("div",De,[t("img",{src:l(s).song_info.img,alt:""},null,8,Ee)])],6),t("div",{class:v(["lyric_wrapper",{show_all_lyric:f.value}]),onClick:e[3]||(e[3]=o=>W())},[t("div",{class:v(["lyric_line",{lyric_lineTime_show:m.value}])},null,2),t("div",{class:v(["lyric_line_time",{lyric_lineTime_show:m.value}])},g(l(S)(l(c))),3),t("div",{class:v(["lyric",{lyric_show:f.value}])},[l(s).song_info.lyricAll.length==0?(u(),_("span",We,"\u83B7\u53D6\u6B4C\u8BCD\u4E2D")):M("",!0),t("div",{ref_key:"lyricRef",ref:A},[(u(!0),_(oe,null,le(l(s).song_info.lyricAll,(o,i)=>(u(),_("div",{key:i,id:"s"+i,class:v({lyric_base:!0,lyric_white:o.time<=l(c)&&l(c)<l(s).song_info.lyricAll[i+1].time}),innerHTML:o.lyric},null,10,xe))),128)),e[23]||(e[23]=t("div",{class:"lyric_bottom"},null,-1))],512)],2)],2),t("div",Re,[t("img",{src:ge,onClick:e[4]||(e[4]=o=>x()),alt:""}),t("img",{src:_e,onClick:e[5]||(e[5]=o=>z()),alt:""}),t("img",{src:pe,onClick:e[6]||(e[6]=o=>x()),alt:""}),t("div",{class:"comment",onClick:e[7]||(e[7]=o=>I())},[e[24]||(e[24]=t("img",{src:ye,alt:""},null,-1)),t("div",Xe,g(d.value),1)]),t("img",{src:fe,onClick:Y,alt:""})]),t("div",He,[t("div",Oe,g(l(S)(l(s).song_info.currentTime)),1),t("div",{class:"line",ref_key:"line",ref:y,onTouchstart:e[8]||(e[8]=o=>N(o)),onTouchmove:e[9]||(e[9]=o=>V(o)),onTouchend:e[10]||(e[10]=o=>j())},[t("div",{class:"past",ref_key:"linePast",ref:$},null,512),t("div",{class:v({circle_point:!0}),ref_key:"point",ref:h},null,512),e[25]||(e[25]=t("div",{class:"not_play"},null,-1))],544),t("div",qe,g(l(S)(l(s).song_info.duration)),1)]),t("div",ze,[l(s).song_info.playMode==1?(u(),_("img",{key:0,onClick:e[11]||(e[11]=o=>l(s).set_circulate()),src:be,alt:""})):l(s).song_info.playMode==2?(u(),_("img",{key:1,onClick:e[12]||(e[12]=o=>l(s).set_circulate()),src:we,alt:""})):l(s).song_info.playMode==3?(u(),_("img",{key:2,onClick:e[13]||(e[13]=o=>l(s).set_circulate()),src:he,alt:""})):M("",!0),t("img",{onClick:e[14]||(e[14]=o=>l(s).play_next(-1)),src:O,alt:""}),l(s).song_info.isPlaying?(u(),_("img",{key:3,class:"bigPlay",onClick:e[15]||(e[15]=X(o=>E(),["stop"])),src:ke,alt:""})):(u(),_("img",{key:4,class:"bigPlay",onClick:e[16]||(e[16]=X(o=>E(),["stop"])),src:de,alt:""})),t("img",{onClick:e[17]||(e[17]=o=>l(s).play_next(null)),src:O,style:{transform:"rotate(180deg)"},alt:""}),t("img",{onClick:e[18]||(e[18]=o=>l(s).set_pop_list(!0)),src:Ce,alt:""})])])]))}});var Ze=K(Ne,[["__scopeId","data-v-48ef1378"]]);export{Ze as default};

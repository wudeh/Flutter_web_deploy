import{T as s,s as F}from"./index.105eb99a.js";function c(e,t){if(!e){s("\u8FD8\u672A\u83B7\u53D6\u5230\u4E0B\u8F7D\u94FE\u63A5\uFF0C\u8BF7\u7A0D\u540E");return}if(e.indexOf("http://")>=0||e.indexOf("https://")>=0){let l="";location.protocol==="https:"?l=e.replace("http://","https://"):l=e;let d=e.split("."),p=d[d.length-1];s(`${t.name} \u5F00\u59CB\u4E0B\u8F7D`);var u=new XMLHttpRequest;u.open("GET",l,!0),u.responseType="blob",u.onload=function(o){if(o.target.readyState===4&&o.target.status===200){let a=this.response,r=window.URL.createObjectURL(new Blob([a])),n=document.createElement("a");n.download=`${t.name}.${p}`,n.href=r,n.style.display="none",document.body.appendChild(n),n.click(),n.remove()}},u.send(),u.addEventListener("progress",function(o){if(o.lengthComputable){let a=o.loaded/o.total*100;F().download_progress({id:t.id,name:t.name,author:t.author,progress:a.toFixed(2)}),a>=100&&s(`${t.name} \u4E0B\u8F7D\u6210\u529F`)}else s.fail("\u5F53\u524D\u97F3\u4E50\u5DF2\u5728\u4E0B\u8F7D\uFF0C\u4F46\u65E0\u6CD5\u83B7\u53D6\u4E0B\u8F7D\u8FDB\u5EA6")},!1),u.onerror=function(){console.log("<-----\u6587\u4EF6\u4E0B\u8F7D\u5931\u8D25----->")}}}export{c as d};

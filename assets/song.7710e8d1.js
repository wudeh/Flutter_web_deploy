var te=Object.defineProperty,oe=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var O=(u,a,e)=>a in u?te(u,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[a]=e,X=(u,a)=>{for(var e in a||(a={}))ie.call(a,e)&&O(u,e,a[e]);if(R)for(var e of R(a))ne.call(a,e)&&O(u,e,a[e]);return u},H=(u,a)=>oe(u,le(a));import{i as ae,u as re,k as r,T as B,l as N,H as ue,n as _e,m as C,o as c,q as d,y as o,t as i,A as h,x as m,J as ce,v as A,z as de,M as fe,F as ve,C as me,B as q,E as ge,G as pe,N as x,O as ye}from"./vendor.1af84381.js";import{_ as he}from"./share.56451215.js";import{B as be,_ as we}from"./core.esm.21b99625.js";import{_ as Ce}from"./songInfo.ee9e09a9.js";import{_ as ke}from"./play_white.b19edd9c.js";import{_ as Fe,s as $e,d as Te}from"./index.eda45cf3.js";import{g as E}from"./num.de8f9d34.js";import{d as Le}from"./download.d0c3b869.js";var Me="/Flutter_web_deploy/assets/arrow_down.7cf71c80.svg",z="/Flutter_web_deploy/assets/volume.c8ee860b.svg",Pe="/Flutter_web_deploy/assets/needle.60c17542.png",Se="/Flutter_web_deploy/assets/like_white.446989e4.svg",Be="/Flutter_web_deploy/assets/sing.5fe37645.svg",Ae="/Flutter_web_deploy/assets/comment_num.7683d72f.svg",xe="/Flutter_web_deploy/assets/circulate.dae8c7da.svg",Ee="/Flutter_web_deploy/assets/circulate_random.f0fea622.svg",je="/Flutter_web_deploy/assets/circulate_one.50becdd2.svg",V="/Flutter_web_deploy/assets/last_song.50462e9f.svg",De="/Flutter_web_deploy/assets/stop_white.e331bfd5.svg",We="/Flutter_web_deploy/assets/list_white.9fd8f699.svg";const y=u=>(ge("data-v-48ef1378"),u=u(),pe(),u),Ie={class:"popup"},Re={class:"song_pop"},Oe={class:"bg_blur"},Xe=["src"],He={class:"nav"},Ne={class:"title"},qe={class:"name"},ze={class:"author"},Ve=y(()=>o("div",{class:"share",style:{opacity:"0"}},[o("img",{src:he,alt:""})],-1)),Ge=y(()=>o("div",{class:"img"},[o("img",{src:z,alt:""})],-1)),Je=y(()=>o("div",{class:"not_play"},null,-1)),Ye={class:"img"},Ke=y(()=>o("img",{src:z,alt:""},null,-1)),Qe=[Ke],Ue={class:"middle"},Ze=["src"],es={key:0},ss=["id","innerHTML"],ts=y(()=>o("div",{class:"lyric_bottom"},null,-1)),os={class:"icon_top"},ls=y(()=>o("img",{src:Ae,alt:""},null,-1)),is={class:"comment_num"},ns={class:"progress"},as={class:"current_time"},rs=y(()=>o("div",{class:"not_play"},null,-1)),us={class:"durasion"},_s={class:"bottom_icon"},cs={name:"song"};function ds(u){const a=re();r(0);const e=$e();e.song_info.id===""&&(B("\u4F60\u53EF\u771F\u662F\u4E2A\u5C0F\u57FA\u4F6C"),a.push({name:"404"}));const f=r(!1),p=r(!1),$=r(!0);N([]);const T=r(!0);let k=r();const L=r(0);let g=r(0);const v=r(""),M=r(),F=r(),b=r();let _=N({bs:""});const G=()=>{a.go(-1)},J=()=>{Le(e.song_info.url,{id:e.song_info.id,name:e.song_info.name,author:e.song_info.author})},j=async()=>{try{let s=(await Te(e.song_info.id,0,1,20,3,"")).data.totalCount;s>=100&&s<1e3?v.value="99+":s>=1e3&&s<1e4?v.value="999+":s===1e4?v.value="1w":s>1e4&&s<1e5?v.value="1w+":s>=1e5?v.value="10w+":v.value=v.value.toString()}catch{B("\u83B7\u53D6\u6B4C\u8BCD\u51FA\u9519")}},Y=()=>{a.push({path:"/comment",query:{id:e.song_info.id,type:e.song_info.type}})};ue(()=>{e.song_info.id||a.push("/")}),_e(async()=>{M.value.style.width=`${e.song_info.buffered/e.song_info.duration*100}%`,_.bs=new be(".lyric",{probeType:2,momentum:!1,scrollX:!1,scrollY:!0,click:!0,disableTouch:!1}),_.bs.on("beforeScrollStart",()=>{}),_.bs.on("scroll",n=>{p.value=!0;let s=Math.abs(n.y)/k.value.children[0].offsetHeight;g.value=e.song_info.lyricAll[Math.ceil(s)-1<=0?0:Math.ceil(s)-1].time}),_.bs.on("scrollEnd",()=>{p.value&&e.set_progress_time(g.value),p.value=!1}),_.bs.disable(),e.song_info.id&&!v.value&&j()}),C(()=>e.song_info.lyricAll.length,()=>{x(()=>{_.bs.refresh()})}),C(()=>e.song_info.id,n=>{n!=""&&j()}),C(()=>a.currentRoute.value.name,n=>{n!="song"?T.value=!1:T.value=!0}),C(()=>e.song_info.currentTime,()=>{T.value&&!p.value&&(g.value=e.song_info.currentTime,e.song_info.lyricAll.forEach((n,s,t)=>{g.value>=n.time&&g.value<=t[s+1].time&&_.bs.scrollToElement(`#s${s}`,100)})),$.value&&(F.value.style.left=`${e.song_info.currentTime/e.song_info.duration*100}%`)}),C(()=>e.song_info.buffered,()=>{M.value.style.width=`${e.song_info.buffered/e.song_info.duration*100}%`});function D(){e.play(!e.song_info.isPlaying),x(()=>{_.bs.refresh()})}const W=()=>{f.value=!f.value,x(()=>{_.bs.refresh()}),f.value?_.bs.enable():(_.bs.disable(),p.value=!1)};r(!1);const K=n=>{$.value=!1;let s=b.value.offsetWidth,l=(n.touches[0].clientX-b.value.offsetLeft)/s;L.value=e.song_info.duration*l,l>=0&&l<=1&&(F.value.style.left=`${l*100}%`)},Q=n=>{let s=b.value.offsetWidth,l=(n.touches[0].clientX-b.value.offsetLeft)/s;L.value=e.song_info.duration*l,l>=0&&l<=1&&(F.value.style.left=`${l*100}%`)},U=n=>{$.value=!0,e.set_progress_time(L.value)},w=r(),P=r(),S=r(),Z=n=>{let s=w.value.offsetWidth,l=(n.touches[0].clientX-w.value.offsetLeft)/s;l>=0&&l<=1&&(e.set_volume(parseFloat(l.toFixed(1))),S.value.style.left=`${l*100}%`,P.value.style.width=`${l*100}%`)},ee=n=>{let s=w.value.offsetWidth,l=(n.touches[0].clientX-w.value.offsetLeft)/s;l>=0&&l<=1&&(e.set_volume(parseFloat(l.toFixed(1))),S.value.style.left=`${l*100}%`,P.value.style.width=`${l*100}%`)},se=()=>{let n={id:e.song_info.id,name:e.song_info.name,author:e.song_info.author,img:e.song_info.img,type:e.song_info.type,isSongClik:!0,al:e.song_info.al};e.set_pop_detail(n)},I=()=>{B("\u656C\u8BF7\u671F\u5F85")};return(n,s)=>(c(),d("div",Ie,[o("div",Re,[o("div",Oe,[o("img",{src:i(e).song_info.img,alt:""},null,8,Xe)]),o("div",He,[o("div",{class:"back"},[o("img",{src:Me,onClick:G,alt:""})]),o("div",Ne,[o("div",qe,h(i(e).song_info.name),1),o("div",ze,h(i(e).song_info.author),1)]),Ve]),o("div",{class:m(["volume",{hidden:!f.value}])},[Ge,o("div",{class:"line",ref:(t,l)=>{l.volume_line=t,w.value=t},onTouchstart:s[0]||(s[0]=t=>Z(t)),onTouchmove:s[1]||(s[1]=t=>ee(t))},[o("div",{class:"past",ref:(t,l)=>{l.volume_linePast=t,P.value=t}},null,512),o("div",{class:"circle_point",ref:(t,l)=>{l.volume_point=t,S.value=t}},null,512),Je],544),ce(o("div",Ye,Qe,512),[[ye,!1]])],2),f.value?A("",!0):(c(),d("img",{key:0,class:m(["needle",{needle_play:i(e).song_info.isPlaying,hidden:f.value}]),src:Pe,alt:""},null,2)),o("div",{class:m(["rotate",{hidden:f.value}]),style:de({animationPlayState:i(e).song_info.isPlaying?"running":"paused"}),onClick:s[2]||(s[2]=t=>W())},[o("div",Ue,[o("img",{src:i(e).song_info.img,alt:""},null,8,Ze)])],6),o("div",{class:m(["lyric_wrapper",{show_all_lyric:f.value}]),onClick:s[3]||(s[3]=t=>W())},[o("div",{class:m(["lyric_line",{lyric_lineTime_show:p.value}])},null,2),o("div",{class:m(["lyric_line_time",{lyric_lineTime_show:p.value}])},h(i(E)(i(g))),3),o("div",{class:m(["lyric",{lyric_show:f.value}])},[i(e).song_info.lyricAll.length==0?(c(),d("span",es,"\u83B7\u53D6\u6B4C\u8BCD\u4E2D")):A("",!0),o("div",{ref:(t,l)=>{l.lyricRef=t,fe(k)?k.value=t:k=t}},[(c(!0),d(ve,null,me(i(e).song_info.lyricAll,(t,l)=>(c(),d("div",{key:l,id:"s"+l,class:m({lyric_base:!0,lyric_white:t.time<=i(g)&&i(g)<i(e).song_info.lyricAll[l+1].time}),innerHTML:t.lyric},null,10,ss))),128)),ts],512)],2)],2),o("div",os,[o("img",{src:Se,onClick:s[4]||(s[4]=t=>I()),alt:""}),o("img",{src:we,onClick:s[5]||(s[5]=t=>J()),alt:""}),o("img",{src:Be,onClick:s[6]||(s[6]=t=>I()),alt:""}),o("div",{class:"comment",onClick:s[7]||(s[7]=t=>Y())},[ls,o("div",is,h(v.value),1)]),o("img",{src:Ce,onClick:se,alt:""})]),o("div",ns,[o("div",as,h(i(E)(i(e).song_info.currentTime)),1),o("div",{class:"line",ref:(t,l)=>{l.line=t,b.value=t},onTouchstart:s[8]||(s[8]=t=>K(t)),onTouchmove:s[9]||(s[9]=t=>Q(t)),onTouchend:s[10]||(s[10]=t=>U())},[o("div",{class:"past",ref:(t,l)=>{l.linePast=t,M.value=t}},null,512),o("div",{class:m({circle_point:!0}),ref:(t,l)=>{l.point=t,F.value=t}},null,512),rs],544),o("div",us,h(i(E)(i(e).song_info.duration)),1)]),o("div",_s,[i(e).song_info.playMode==1?(c(),d("img",{key:0,onClick:s[11]||(s[11]=t=>i(e).set_circulate()),src:xe,alt:""})):i(e).song_info.playMode==2?(c(),d("img",{key:1,onClick:s[12]||(s[12]=t=>i(e).set_circulate()),src:Ee,alt:""})):i(e).song_info.playMode==3?(c(),d("img",{key:2,onClick:s[13]||(s[13]=t=>i(e).set_circulate()),src:je,alt:""})):A("",!0),o("img",{onClick:s[14]||(s[14]=t=>i(e).play_next(-1)),src:V,alt:""}),i(e).song_info.isPlaying?(c(),d("img",{key:3,class:"bigPlay",onClick:s[15]||(s[15]=q(t=>D(),["stop"])),src:De,alt:""})):(c(),d("img",{key:4,class:"bigPlay",onClick:s[16]||(s[16]=q(t=>D(),["stop"])),src:ke,alt:""})),o("img",{onClick:s[17]||(s[17]=t=>i(e).play_next(null)),src:V,style:{transform:"rotate(180deg)"},alt:""}),o("img",{onClick:s[18]||(s[18]=t=>i(e).set_pop_list(!0)),src:We,alt:""})])])]))}const fs=ae(H(X({},cs),{setup:ds}));var ks=Fe(fs,[["__scopeId","data-v-48ef1378"]]);export{ks as default};

import{_ as D}from"./left_arrow.037609f2.js";import{_ as E,a as S,b as $}from"./playAll.e9928245.js";import{_ as B}from"./sub.f0b346da.js";import{_ as U}from"./comment.17c56d6e.js";import{_ as P}from"./share.56451215.js";import{_ as q}from"./loading.1e3c318a.js";import{_ as M}from"./songInfo.ee9e09a9.js";import{_ as N,d as R,s as T,r as V,a as k,A as z,S as G,U as H,g as J,c as e,e as l,j as s,u,f as m,t as i,i as y,F as b,z as w,n as F,h as K,q as O,T as Q,x as C}from"./index.f7fb392c.js";import{n as g,g as W}from"./num.de8f9d34.js";const X={class:"top"},Y={class:"img_blur"},Z=["src"],ss={class:"navSongList"},os={class:"info"},ts={class:"avatar"},ns={class:"detail"},as={class:"title"},is={class:"person"},es={class:"name"},ls={key:0,class:"Follow"},rs={key:1,class:"notFollow"},ds={class:"text"},us={class:"count"},_s={class:"sub item"},cs={key:0,src:$,alt:""},ms={key:1,src:B,alt:""},gs={class:"share item"},ps={class:"playAll"},vs={key:0,class:"play_count"},fs={class:"index"},hs={key:0,width:"18",src:q,alt:""},ys={key:1},Cs=["onClick"],ks={class:"info_top"},bs={class:"song_name"},ws={class:"info_bottom"},Fs=["onClick"],Is={class:"title"},Ls={key:0,class:"babel"},As={name:"djProgram"},js=R({...As,setup(xs){const v=O(),r=T(),I=V(),t=k({numFilter:g,title:"",img:"",description:"",tags:[],subscribed:!1,songListInfo:[],shareCount:0,subscribedCount:0,commentCount:0,asc:!1,show:!1}),_=k({avatar:"",nickname:"",userId:"",followed:!1}),f=v.currentRoute.value.query.id;z(async()=>{r.set_load(!0);const n=await G(f);t.title=n.data.name,t.img=n.data.picUrl,t.description=n.data.desc,t.subscribed=n.data.subed,t.subscribedCount=n.data.subCount,t.commentCount=n.data.commentCount,t.shareCount=n.data.shareCount,_.avatar=n.data.dj.defaultAvatar?n.data.dj.defaultAvatar:n.data.dj.avatarUrl,_.userId=n.data.dj.userId,_.nickname=n.data.dj.nickname,_.followed=n.data.dj.followed;let o=await H(f,t.asc);t.songListInfo=t.songListInfo.concat(o.programs);let c=o.programs.map(d=>d.id);const h=await J(c.join(","));t.songListInfo.splice(0),o.programs.forEach((d,a)=>{t.songListInfo.push({id:d.mainSong.id,name:d.mainSong.name,author:d.dj.nickname,playCount:g(d.listenerCount),duration:W(d.duration/1e3),url:h[a],img:d.coverUrl})}),r.set_load(!1)});function L(n){if(n.id==r.song_info.id){r.play(!r.song_info.isPlaying);return}if(n.resourceId!=r.song_info.id){r.play(!1);let o={id:n.id,type:4,name:n.name,author:n.author,url:n.url,img:n.img,al:n.al.name};r.setSongInfo(o)}}const A=()=>{if(t.songListInfo.length==0){Q("\u8FD8\u672A\u83B7\u53D6\u5230\u97F3\u4E50\u5217\u8868\uFF0C\u8BF7\u7A0D\u540E");return}let n=[];t.songListInfo.forEach((o,c)=>{n.push({id:o.id,type:0,name:o.name,author:o.author,img:o.img})}),r.add_songList(n)},j=(n,o)=>{n.type=o,r.set_pop_detail(n)};return(n,o)=>{const c=C("van-image"),h=C("van-icon"),d=C("van-overlay");return e(),l("div",{class:F({first_div:!0,first_div_song_height:u(r).song_info.id})},[s("div",X,[s("div",Y,[s("img",{src:t.img,alt:""},null,8,Z)]),s("div",ss,[s("div",{class:"left_arrow",onClick:o[0]||(o[0]=a=>u(v).go(-1))},o[5]||(o[5]=[s("img",{src:D,alt:""},null,-1)])),o[6]||(o[6]=s("div",{class:"title"},"\u64AD\u5355",-1)),o[7]||(o[7]=s("div",{class:"search"},[s("img",{src:E,alt:""})],-1))]),s("div",os,[s("div",ts,[m(c,{radius:"8",class:"img",src:t.img},null,8,["src"])]),s("div",ns,[s("div",as,i(t.title),1),s("div",is,[m(c,{radius:"50%",class:"img",src:_.avatar},null,8,["src"]),s("span",es,i(_.nickname),1),_.followed?(e(),l("span",ls,">")):(e(),l("span",rs,"+"))]),t.description?(e(),l("div",{key:0,class:"des",onClick:o[1]||(o[1]=a=>t.show=!0)},[s("div",ds,i(t.description),1),m(h,{name:"arrow"})])):y("",!0)])])]),s("div",us,[s("div",_s,[t.subscribed?(e(),l("img",cs)):(e(),l("img",ms)),s("span",null,i(u(g)(t.subscribedCount)),1)]),o[10]||(o[10]=s("div",{class:"line"},null,-1)),s("div",{class:"comment item",onClick:o[2]||(o[2]=a=>u(v).push({path:"/comment",query:{id:u(f),type:4}}))},[o[8]||(o[8]=s("img",{src:U,alt:""},null,-1)),s("span",null,i(u(g)(t.commentCount)),1)]),o[11]||(o[11]=s("div",{class:"line"},null,-1)),s("div",gs,[o[9]||(o[9]=s("img",{src:P,alt:""},null,-1)),s("span",null,i(u(g)(t.shareCount)),1)])]),s("div",ps,[s("div",{class:"icon"},[s("img",{onClick:A,src:S,alt:""})]),o[12]||(o[12]=s("div",{class:"text"},[s("div",{class:"play_all_title"},"\u64AD\u653E\u5168\u90E8")],-1)),t.songListInfo.length?(e(),l("div",vs,"("+i(t.songListInfo.length)+")",1)):y("",!0)]),s("div",{class:F(["songList",{songList_no_bar:!u(r).song_info.id}])},[(e(!0),l(b,null,w(t.songListInfo,(a,p)=>(e(),l("div",{class:"song_item",key:p},[s("div",fs,[a.id==u(r).song_info.id?(e(),l("img",hs)):(e(),l("span",ys,i(t.songListInfo.length-p),1))]),s("div",{class:"song_info",onClick:x=>L(a)},[s("div",ks,[s("div",bs,i(a.name),1)]),s("div",ws,"\u64AD\u653E\u91CF\uFF1A"+i(a.playCount)+"\xA0 \u65F6\u957F\uFF1A"+i(a.duration)+"\xA0 by\uFF1A"+i(a.author),1)],8,Cs),s("div",{class:"more",onClick:x=>j(a,4)},o[13]||(o[13]=[s("img",{src:M,alt:""},null,-1)]),8,Fs)]))),128))],2),m(d,{show:t.show,onClick:o[4]||(o[4]=a=>t.show=!1),"lock-scroll":!1},{default:K(()=>[s("div",{class:"wrapper",onClick:o[3]||(o[3]=a=>t.show=!1)},[m(c,{radius:"8",class:"img",src:I.value},null,8,["src"]),s("span",Is,i(t.title),1),t.tags.length?(e(),l("div",Ls,[o[14]||(o[14]=s("span",null,"\u6807\u7B7E\uFF1A",-1)),(e(!0),l(b,null,w(t.tags,(a,p)=>(e(),l("span",{class:"babel_item",key:p},i(a),1))),128))])):y("",!0),s("p",null,i(t.description),1)])]),_:1},8,["show"])],2)}}});var Ns=N(js,[["__scopeId","data-v-2106a7ab"]]);export{Ns as default};

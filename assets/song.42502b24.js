var ts=Object.defineProperty,os=Object.defineProperties;var ls=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var is=Object.prototype.hasOwnProperty,ns=Object.prototype.propertyIsEnumerable;var O=(u,a,s)=>a in u?ts(u,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):u[a]=s,X=(u,a)=>{for(var s in a||(a={}))is.call(a,s)&&O(u,s,a[s]);if(R)for(var s of R(a))ns.call(a,s)&&O(u,s,a[s]);return u},H=(u,a)=>os(u,ls(a));import{i as as,u as rs,k as r,T as B,l as N,H as us,n as cs,m as k,o as d,q as _,y as o,t as i,A as h,x as m,J as ds,v as A,z as _s,M as fs,F as vs,C as ms,B as q,E as gs,G as ps,N as x,O as ys}from"./vendor.1af84381.js";import{_ as hs}from"./share.56451215.js";import{B as bs,_ as Cs}from"./core.esm.21b99625.js";import{_ as ks}from"./songInfo.ee9e09a9.js";import{_ as ws}from"./play_white.b19edd9c.js";import{_ as $s,s as Ts,d as Ls}from"./index.efd36ddd.js";import{g as E}from"./num.de8f9d34.js";import{d as Fs}from"./download.b524dcdf.js";var Ms="/assets/arrow_down.7cf71c80.svg",z="/assets/volume.c8ee860b.svg",Ps="/assets/needle.60c17542.png",Ss="/assets/like_white.446989e4.svg",Bs="/assets/sing.5fe37645.svg",As="/assets/comment_num.7683d72f.svg",xs="/assets/circulate.dae8c7da.svg",Es="/assets/circulate_random.f0fea622.svg",js="/assets/circulate_one.50becdd2.svg",V="/assets/last_song.50462e9f.svg",Ds="/assets/stop_white.e331bfd5.svg",Ws="/assets/list_white.9fd8f699.svg";const y=u=>(gs("data-v-48ef1378"),u=u(),ps(),u),Is={class:"popup"},Rs={class:"song_pop"},Os={class:"bg_blur"},Xs=["src"],Hs={class:"nav"},Ns={class:"title"},qs={class:"name"},zs={class:"author"},Vs=y(()=>o("div",{class:"share",style:{opacity:"0"}},[o("img",{src:hs,alt:""})],-1)),Gs=y(()=>o("div",{class:"img"},[o("img",{src:z,alt:""})],-1)),Js=y(()=>o("div",{class:"not_play"},null,-1)),Ys={class:"img"},Ks=y(()=>o("img",{src:z,alt:""},null,-1)),Qs=[Ks],Us={class:"middle"},Zs=["src"],se={key:0},ee=["id","innerHTML"],te=y(()=>o("div",{class:"lyric_bottom"},null,-1)),oe={class:"icon_top"},le=y(()=>o("img",{src:As,alt:""},null,-1)),ie={class:"comment_num"},ne={class:"progress"},ae={class:"current_time"},re=y(()=>o("div",{class:"not_play"},null,-1)),ue={class:"durasion"},ce={class:"bottom_icon"},de={name:"song"};function _e(u){const a=rs();r(0);const s=Ts();s.song_info.id===""&&(B("\u4F60\u53EF\u771F\u662F\u4E2A\u5C0F\u57FA\u4F6C"),a.push({name:"404"}));const f=r(!1),p=r(!1),T=r(!0);N([]);const L=r(!0);let w=r();const F=r(0);let g=r(0);const v=r(""),M=r(),$=r(),b=r();let c=N({bs:""});const G=()=>{a.go(-1)},J=()=>{Fs(s.song_info.url,{id:s.song_info.id,name:s.song_info.name,author:s.song_info.author})},j=async()=>{try{let e=(await Ls(s.song_info.id,0,1,20,3,"")).data.totalCount;e>=100&&e<1e3?v.value="99+":e>=1e3&&e<1e4?v.value="999+":e===1e4?v.value="1w":e>1e4&&e<1e5?v.value="1w+":e>=1e5?v.value="10w+":v.value=v.value.toString()}catch{B("\u83B7\u53D6\u6B4C\u8BCD\u51FA\u9519")}},Y=()=>{a.push({path:"/comment",query:{id:s.song_info.id,type:s.song_info.type}})};us(()=>{s.song_info.id||a.push("/")}),cs(async()=>{M.value.style.width=`${s.song_info.buffered/s.song_info.duration*100}%`,c.bs=new bs(".lyric",{probeType:2,momentum:!1,scrollX:!1,scrollY:!0,click:!0,disableTouch:!1}),c.bs.on("beforeScrollStart",()=>{}),c.bs.on("scroll",n=>{p.value=!0;let e=Math.abs(n.y)/w.value.children[0].offsetHeight;g.value=s.song_info.lyricAll[Math.ceil(e)-1<=0?0:Math.ceil(e)-1].time}),c.bs.on("scrollEnd",()=>{p.value&&s.set_progress_time(g.value),p.value=!1}),c.bs.disable(),s.song_info.id&&!v.value&&j()}),k(()=>s.song_info.lyricAll.length,()=>{x(()=>{c.bs.refresh()})}),k(()=>s.song_info.id,n=>{n!=""&&j()}),k(()=>a.currentRoute.value.name,n=>{n!="song"?L.value=!1:L.value=!0}),k(()=>s.song_info.currentTime,()=>{L.value&&!p.value&&(g.value=s.song_info.currentTime,s.song_info.lyricAll.forEach((n,e,t)=>{g.value>=n.time&&g.value<=t[e+1].time&&c.bs.scrollToElement(`#s${e}`,100)})),T.value&&($.value.style.left=`${s.song_info.currentTime/s.song_info.duration*100}%`)}),k(()=>s.song_info.buffered,()=>{M.value.style.width=`${s.song_info.buffered/s.song_info.duration*100}%`});function D(){s.play(!s.song_info.isPlaying),x(()=>{c.bs.refresh()})}const W=()=>{f.value=!f.value,x(()=>{c.bs.refresh()}),f.value?c.bs.enable():(c.bs.disable(),p.value=!1)};r(!1);const K=n=>{T.value=!1;let e=b.value.offsetWidth,l=(n.touches[0].clientX-b.value.offsetLeft)/e;F.value=s.song_info.duration*l,l>=0&&l<=1&&($.value.style.left=`${l*100}%`)},Q=n=>{let e=b.value.offsetWidth,l=(n.touches[0].clientX-b.value.offsetLeft)/e;F.value=s.song_info.duration*l,l>=0&&l<=1&&($.value.style.left=`${l*100}%`)},U=n=>{T.value=!0,s.set_progress_time(F.value)},C=r(),P=r(),S=r(),Z=n=>{let e=C.value.offsetWidth,l=(n.touches[0].clientX-C.value.offsetLeft)/e;l>=0&&l<=1&&(s.set_volume(parseFloat(l.toFixed(1))),S.value.style.left=`${l*100}%`,P.value.style.width=`${l*100}%`)},ss=n=>{let e=C.value.offsetWidth,l=(n.touches[0].clientX-C.value.offsetLeft)/e;l>=0&&l<=1&&(s.set_volume(parseFloat(l.toFixed(1))),S.value.style.left=`${l*100}%`,P.value.style.width=`${l*100}%`)},es=()=>{let n={id:s.song_info.id,name:s.song_info.name,author:s.song_info.author,img:s.song_info.img,type:s.song_info.type,isSongClik:!0,al:s.song_info.al};s.set_pop_detail(n)},I=()=>{B("\u656C\u8BF7\u671F\u5F85")};return(n,e)=>(d(),_("div",Is,[o("div",Rs,[o("div",Os,[o("img",{src:i(s).song_info.img,alt:""},null,8,Xs)]),o("div",Hs,[o("div",{class:"back"},[o("img",{src:Ms,onClick:G,alt:""})]),o("div",Ns,[o("div",qs,h(i(s).song_info.name),1),o("div",zs,h(i(s).song_info.author),1)]),Vs]),o("div",{class:m(["volume",{hidden:!f.value}])},[Gs,o("div",{class:"line",ref:(t,l)=>{l.volume_line=t,C.value=t},onTouchstart:e[0]||(e[0]=t=>Z(t)),onTouchmove:e[1]||(e[1]=t=>ss(t))},[o("div",{class:"past",ref:(t,l)=>{l.volume_linePast=t,P.value=t}},null,512),o("div",{class:"circle_point",ref:(t,l)=>{l.volume_point=t,S.value=t}},null,512),Js],544),ds(o("div",Ys,Qs,512),[[ys,!1]])],2),f.value?A("",!0):(d(),_("img",{key:0,class:m(["needle",{needle_play:i(s).song_info.isPlaying,hidden:f.value}]),src:Ps,alt:""},null,2)),o("div",{class:m(["rotate",{hidden:f.value}]),style:_s({animationPlayState:i(s).song_info.isPlaying?"running":"paused"}),onClick:e[2]||(e[2]=t=>W())},[o("div",Us,[o("img",{src:i(s).song_info.img,alt:""},null,8,Zs)])],6),o("div",{class:m(["lyric_wrapper",{show_all_lyric:f.value}]),onClick:e[3]||(e[3]=t=>W())},[o("div",{class:m(["lyric_line",{lyric_lineTime_show:p.value}])},null,2),o("div",{class:m(["lyric_line_time",{lyric_lineTime_show:p.value}])},h(i(E)(i(g))),3),o("div",{class:m(["lyric",{lyric_show:f.value}])},[i(s).song_info.lyricAll.length==0?(d(),_("span",se,"\u83B7\u53D6\u6B4C\u8BCD\u4E2D")):A("",!0),o("div",{ref:(t,l)=>{l.lyricRef=t,fs(w)?w.value=t:w=t}},[(d(!0),_(vs,null,ms(i(s).song_info.lyricAll,(t,l)=>(d(),_("div",{key:l,id:"s"+l,class:m({lyric_base:!0,lyric_white:t.time<=i(g)&&i(g)<i(s).song_info.lyricAll[l+1].time}),innerHTML:t.lyric},null,10,ee))),128)),te],512)],2)],2),o("div",oe,[o("img",{src:Ss,onClick:e[4]||(e[4]=t=>I()),alt:""}),o("img",{src:Cs,onClick:e[5]||(e[5]=t=>J()),alt:""}),o("img",{src:Bs,onClick:e[6]||(e[6]=t=>I()),alt:""}),o("div",{class:"comment",onClick:e[7]||(e[7]=t=>Y())},[le,o("div",ie,h(v.value),1)]),o("img",{src:ks,onClick:es,alt:""})]),o("div",ne,[o("div",ae,h(i(E)(i(s).song_info.currentTime)),1),o("div",{class:"line",ref:(t,l)=>{l.line=t,b.value=t},onTouchstart:e[8]||(e[8]=t=>K(t)),onTouchmove:e[9]||(e[9]=t=>Q(t)),onTouchend:e[10]||(e[10]=t=>U())},[o("div",{class:"past",ref:(t,l)=>{l.linePast=t,M.value=t}},null,512),o("div",{class:m({circle_point:!0}),ref:(t,l)=>{l.point=t,$.value=t}},null,512),re],544),o("div",ue,h(i(E)(i(s).song_info.duration)),1)]),o("div",ce,[i(s).song_info.playMode==1?(d(),_("img",{key:0,onClick:e[11]||(e[11]=t=>i(s).set_circulate()),src:xs,alt:""})):i(s).song_info.playMode==2?(d(),_("img",{key:1,onClick:e[12]||(e[12]=t=>i(s).set_circulate()),src:Es,alt:""})):i(s).song_info.playMode==3?(d(),_("img",{key:2,onClick:e[13]||(e[13]=t=>i(s).set_circulate()),src:js,alt:""})):A("",!0),o("img",{onClick:e[14]||(e[14]=t=>i(s).play_next(-1)),src:V,alt:""}),i(s).song_info.isPlaying?(d(),_("img",{key:3,class:"bigPlay",onClick:e[15]||(e[15]=q(t=>D(),["stop"])),src:Ds,alt:""})):(d(),_("img",{key:4,class:"bigPlay",onClick:e[16]||(e[16]=q(t=>D(),["stop"])),src:ws,alt:""})),o("img",{onClick:e[17]||(e[17]=t=>i(s).play_next(null)),src:V,style:{transform:"rotate(180deg)"},alt:""}),o("img",{onClick:e[18]||(e[18]=t=>i(s).set_pop_list(!0)),src:Ws,alt:""})])])]))}const fe=as(H(X({},de),{setup:_e}));var we=$s(fe,[["__scopeId","data-v-48ef1378"]]);export{we as default};

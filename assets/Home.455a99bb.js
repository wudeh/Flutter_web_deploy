var N=Object.defineProperty,V=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var D=(r,u,s)=>u in r?N(r,u,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[u]=s,A=(r,u)=>{for(var s in u||(u={}))K.call(u,s)&&D(r,s,u[s]);if(B)for(var s of B(u))G.call(u,s)&&D(r,s,u[s]);return r},$=(r,u)=>V(r,H(u));import{i as O,u as J,j as Q,k as d,l as x,m as g,T as f,n as W,p as X,r as L,o as _,q as c,s as b,w,c as C,a as Y,t as o,K as Z,v,x as E,y as e,z as ss,A as p,B as T,F as es,C as os,D as ts,E as ns,G as is}from"./vendor.1af84381.js";import{_ as S}from"./loading.ae9c4f02.js";import{_ as ls}from"./sub.f0b346da.js";import{_ as as}from"./comment.17c56d6e.js";import{_ as us}from"./share.56451215.js";import{_ as _s,s as rs,g as I}from"./index.e55cdfeb.js";import{d as ds}from"./download.cac4e01a.js";var cs="/Flutter_web_deploy/assets/stop_icon.f272f983.svg",ps="/Flutter_web_deploy/assets/play_icon.971b473f.svg",gs="/Flutter_web_deploy/assets/list_icon.82c00d89.svg",vs="/Flutter_web_deploy/assets/circulate_gray.91b2c30b.svg",ms="/Flutter_web_deploy/assets/circulate_random_gray.6d9ef32b.svg",fs="/Flutter_web_deploy/assets/circulate_one_gray.cd22f14b.svg",hs="/Flutter_web_deploy/assets/collect_gray.f1b40daf.svg",ys="/Flutter_web_deploy/assets/finger.bd88e2ba.svg",Fs="/Flutter_web_deploy/assets/delete_gray.de068543.svg",bs="/Flutter_web_deploy/assets/delete.f02346d1.svg",ws="/Flutter_web_deploy/assets/cover-bg-in.c5a56a3e.png",Cs="/Flutter_web_deploy/assets/download_gray.ec9df863.svg",Es="/Flutter_web_deploy/assets/singer.b8c9cb78.svg",ks="/Flutter_web_deploy/assets/album.86b904fe.svg",Bs="/Flutter_web_deploy/assets/cloud.ca8a16e8.svg",Ds="/Flutter_web_deploy/assets/lingsheng.6ca203ba.svg",As="/Flutter_web_deploy/assets/buy.4891d408.svg",$s="/Flutter_web_deploy/assets/hide.ed379cee.svg";const a=r=>(ns("data-v-580f5a75"),r=r(),is(),r),xs={class:"home"},Ls={key:0,class:"songDiv"},Ts=["src"],Ss={class:"info"},Is={class:"song_name"},js={class:"song_author"},Ps={key:0,src:cs,alt:""},Rs={key:1,src:ps,alt:""},zs=["onClick"],Ms={class:"pop_list"},qs={class:"title"},Us={class:"option"},Ns={key:0,class:"circulate"},Vs=a(()=>e("span",null,"\u5217\u8868\u5FAA\u73AF",-1)),Hs={key:1,class:"circulate"},Ks=a(()=>e("span",null,"\u968F\u673A\u64AD\u653E",-1)),Gs={key:2,class:"circulate"},Os=a(()=>e("span",null,"\u5355\u66F2\u5FAA\u73AF",-1)),Js={class:"get"},Qs=a(()=>e("img",{src:hs,alt:""},null,-1)),Ws=a(()=>e("img",{class:"finger",src:ys,alt:""},null,-1)),Xs=a(()=>e("span",null,"\u6536\u85CF\u5168\u90E8",-1)),Ys={class:"list"},Zs=["onClick"],se={class:"icon"},ee={key:0,src:S,alt:""},oe=a(()=>e("span",null,"\xA0-\xA0",-1)),te={class:"author"},ne=["onClick"],ie={key:0,class:"load"},le=a(()=>e("img",{src:S,alt:""},null,-1)),ae=a(()=>e("span",null,"\u52A0\u8F7D\u4E2D...",-1)),ue=[le,ae],_e={class:"song_detail"},re={class:"info"},de={class:"img"},ce=["src"],pe={class:"title"},ge={class:"author"},ve=a(()=>e("img",{style:{"border-radius":"50%"},src:ws,alt:""},null,-1)),me=a(()=>e("span",null,"\u4E0B\u4E00\u9996\u64AD\u653E",-1)),fe=[ve,me],he=a(()=>e("div",{class:"item"},[e("img",{src:ls,alt:""}),e("span",null,"\u6536\u85CF\u5230\u6B4C\u5355")],-1)),ye=a(()=>e("img",{src:Cs,alt:""},null,-1)),Fe=a(()=>e("span",null,"\u4E0B\u8F7D",-1)),be=[ye,Fe],we=a(()=>e("img",{src:as,alt:""},null,-1)),Ce=a(()=>e("div",{class:"item"},[e("img",{src:us,alt:""}),e("span",null,"\u5206\u4EAB")],-1)),Ee={class:"item"},ke=a(()=>e("img",{src:Es,alt:""},null,-1)),Be={class:"item"},De=a(()=>e("img",{src:ks,alt:""},null,-1)),Ae=a(()=>e("div",{class:"item"},[e("img",{src:Bs,alt:""}),e("span",null,"\u4E91\u8D1D\u63A8\u6B4C")],-1)),$e=a(()=>e("div",{class:"item"},[e("img",{src:Ds,alt:""}),e("span",null,"\u8BBE\u7F6E\u94C3\u58F0")],-1)),xe=a(()=>e("div",{class:"item"},[e("img",{src:As,alt:""}),e("span",null,"\u5355\u66F2\u8D2D\u4E70")],-1)),Le=a(()=>e("div",{class:"item"},[e("img",{src:$s,alt:""}),e("span",null,"\u5C4F\u853D\u6B4C\u66F2\u6216\u8005\u6B4C\u624B")],-1)),Te={name:"home"};function Se(r){const u=J();Q(),d(0);const s=rs(),n=d(new Audio);d(),d(),d(),d(),d();let F=d();d("00:00.00"),x([]),d();const k=d(""),h=x(["song","discover"]);function j(){s.play(!s.song_info.isPlaying)}const P=()=>{u.push({path:"/song"})};function R(){F.value=setInterval(()=>{s.set_song_time(n.value.currentTime),s.set_song_allTime(n.value.duration)},1e3)}g(()=>s.song_info.isPlaying,(l,t)=>{l?(n.value.src||(n.value.src=s.song_info.url),n.value.autoplay=!0,n.value.play(),R()):(n.value.pause(),clearInterval(F.value))}),g(()=>s.song_info.id,async(l,t)=>{if(l){n.value.pause(),f.loading({message:"\u83B7\u53D6\u97F3\u4E50\u4E2D\uFF0C\u8BF7\u7A0D\u540E",overlay:!0,duration:0,forbidClick:!0});const m=await I(s.song_info.id,s.song_info.type);f.clear(),s.set_song_url(m.data[0].url),n.value.src=s.song_info.url,n.value.play(),s.play(!0),s.song_info.id&&s.lyricRequest()}}),g(()=>s.song_info.progressTime,()=>{n.value.currentTime=s.song_info.progressTime}),g(()=>u.currentRoute.value,(l,t)=>{if(s.set_load(!1),l.meta.level>t.meta.level){if(t.name=="song")return;h.push(l.name),k.value="slide-left"}else h.splice(h.indexOf(t.name),1),k.value="slide-right"}),g(()=>s.song_info.currentTime,l=>{s.song_info.lyricAll.forEach((t,m,y)=>{l>=t.time&&l<=y[m+1].time&&s.set_lyric(t.lyric)})}),g(()=>s.song_info.volume,l=>{n.value.volume=s.song_info.volume}),g(()=>s.song_info.lyric,l=>{console.info(`%c > ${l.replace("<br>"," > ")}`,"color:#db2c1f;background:rgba(0,0,0,0.2);font-size:25px;border-radius:6px")}),W(async()=>{if(s.song_info.id){const l=await I(s.song_info.id);s.set_song_url(l.data[0].url),s.song_info.list.length==0&&s.add_song({id:s.song_info.id,name:s.song_info.name,author:s.song_info.author,img:s.song_info.img,url:s.song_info.url})}localStorage.getItem("songId")&&f("\u53D1\u73B0\u4E0A\u6B21\u64AD\u653E\u6570\u636E\uFF0C\u52A0\u5165\u64AD\u653E\u5217\u8868"),n.value.preload="auto",n.value.load(),n.value.addEventListener("progress",()=>{if(s.set_song_allTime(n.value.duration),n.value.buffered.length>0){let l=n.value.buffered.end(n.value.buffered.length-1);s.set_song_buffered(l)}}),n.value.addEventListener("loadstart",()=>{}),n.value.addEventListener("error",()=>{s.play(!1),f.fail("\u6570\u636E\u7F13\u51B2\u5931\u8D25")}),n.value.addEventListener("stalled",()=>{s.song_info.isPlaying&&f("\u5F53\u524D\u7F51\u7EDC\u8F83\u5DEE"),s.song_info.duration||s.set_song_allTime(0)}),n.value.addEventListener("waiting",()=>{}),n.value.addEventListener("play",()=>{console.info("%c > console \u6B4C\u8BCD\u7CFB\u7EDF\u5DE5\u4F5C ing","color:#db2c1f;background:rgba(0,0,0,0.2);font-size:25px;border-radius:6px")}),n.value.addEventListener("pause",()=>{}),n.value.addEventListener("ended",()=>{s.play(!1),s.play_next(null)}),n.value.addEventListener("ready",()=>{}),s.song_info.id&&s.lyricRequest(),window.addEventListener("popstate",()=>{setTimeout(()=>{let l=sessionStorage.getItem("scrollTop");l&&window.scrollTo(0,parseInt(l))},520)})});const z=d("slide");z.value="slide-left",X(()=>{clearInterval(F.value)});const M=()=>{s.set_pop_list(!0)},q=l=>{s.close(),u.push({path:"/comment",query:{id:l}})};return(l,t)=>{const m=L("router-view"),y=L("van-popup");return _(),c("div",xs,[b(m,null,{default:w(({Component:i})=>[(_(),C(Z,{include:o(h)},[(_(),C(Y(i)))],1032,["include"]))]),_:1}),o(s).song_info.id&&o(u).currentRoute.value.name!="song"?(_(),c("div",Ls)):v("",!0),o(u).currentRoute.value.name!="song"?(_(),c("div",{key:1,class:E(["song",{fixed_out:!o(s).song_info.id}]),onClick:t[1]||(t[1]=i=>P())},[e("div",{class:"song_img rotate",style:ss({animationPlayState:o(s).song_info.isPlaying?"running":"paused"})},[e("img",{src:o(s).song_info.img,alt:""},null,8,Ts)],4),e("div",Ss,[e("div",Is,p(o(s).song_info.name),1),e("div",js,"-"+p(o(s).song_info.author),1)]),e("div",{class:"icon",onClick:t[0]||(t[0]=T(i=>j(),["stop"]))},[o(s).song_info.isPlaying?(_(),c("img",Ps)):(_(),c("img",Rs))]),e("img",{onClick:T(M,["stop"]),src:gs,alt:""},null,8,zs)],2)):v("",!0),b(y,{show:o(s).showList,"onUpdate:show":t[6]||(t[6]=i=>o(s).showList=i),"lock-scroll":!1,round:"",onClose:t[7]||(t[7]=i=>o(s).close()),"close-on-popstate":!0,position:"bottom",style:{height:"50%"}},{default:w(()=>[e("div",Ms,[e("div",qs,"\u5F53\u524D\u64AD\u653E\u5217\u8868("+p(o(s).song_info.list.length)+")",1),e("div",Us,[o(s).song_info.playMode==1?(_(),c("div",Ns,[e("img",{onClick:t[2]||(t[2]=i=>o(s).set_circulate()),src:vs,alt:""}),Vs])):v("",!0),o(s).song_info.playMode==2?(_(),c("div",Hs,[e("img",{onClick:t[3]||(t[3]=i=>o(s).set_circulate()),src:ms,alt:""}),Ks])):v("",!0),o(s).song_info.playMode==3?(_(),c("div",Gs,[e("img",{onClick:t[4]||(t[4]=i=>o(s).set_circulate()),src:fs,alt:""}),Os])):v("",!0),e("div",Js,[Qs,Ws,Xs,e("img",{class:"del_list",onClick:t[5]||(t[5]=i=>o(s).delete_all()),src:Fs,alt:""})])]),e("div",Ys,[(_(!0),c(es,null,os(o(s).song_info.list,i=>(_(),c("div",{class:"item",key:i.id},[e("div",{class:E({info:!0,red:i.id==o(s).song_info.id}),onClick:U=>o(s).play_by_id(i.id)},[e("div",se,[i.id==o(s).song_info.id?(_(),c("img",ee)):v("",!0)]),e("span",{class:E({name:!0,red:i.id==o(s).song_info.id})},p(i.name),3),oe,e("span",te,p(i.author),1)],10,Zs),e("img",{class:"delete",onClick:U=>o(s).delete(i.id),src:bs,alt:""},null,8,ne)]))),128))])])]),_:1},8,["show"]),(_(),C(ts,{to:"#app"},[o(s).showLoading?(_(),c("div",ie,ue)):v("",!0)])),b(y,{show:o(s).showDetail,"onUpdate:show":t[11]||(t[11]=i=>o(s).showDetail=i),round:"",onClose:t[12]||(t[12]=i=>o(s).close()),"close-on-popstate":!0,position:"bottom",style:{height:"50%"}},{default:w(()=>[e("div",_e,[e("div",re,[e("div",de,[e("img",{src:o(s).song_pop_detail.img,alt:""},null,8,ce)]),e("div",pe,[e("span",null,"\u6B4C\u66F2\uFF1A"+p(o(s).song_pop_detail.name),1),e("span",ge,p(o(s).song_pop_detail.author),1)])]),e("div",{class:"item",onClick:t[8]||(t[8]=i=>o(s).add_song(o(s).song_pop_detail))},fe),he,e("div",{class:"item",onClick:t[9]||(t[9]=i=>o(ds)(o(s).song_pop_detail.url,{id:o(s).song_pop_detail.id,name:o(s).song_pop_detail.name,author:o(s).song_pop_detail.author}))},be),e("div",{class:"item",onClick:t[10]||(t[10]=i=>q(o(s).song_pop_detail.id.toString()))},[we,e("span",null,"\u8BC4\u8BBA\uFF08"+p(o(s).song_pop_detail.commentCount)+"\uFF09",1)]),Ce,e("div",Ee,[ke,e("span",null,"\u6B4C\u624B\uFF1A"+p(o(s).song_pop_detail.author),1)]),e("div",Be,[De,e("span",null,"\u4E13\u8F91\uFF1A"+p(o(s).song_pop_detail.al),1)]),Ae,$e,xe,Le])]),_:1},8,["show"])])}}const Ie=O($(A({},Te),{setup:Se}));var Ve=_s(Ie,[["__scopeId","data-v-580f5a75"]]);export{Ve as default};

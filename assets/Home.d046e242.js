var N=Object.defineProperty,V=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var w=(_,u,s)=>u in _?N(_,u,{enumerable:!0,configurable:!0,writable:!0,value:s}):_[u]=s,A=(_,u)=>{for(var s in u||(u={}))K.call(u,s)&&w(_,s,u[s]);if(D)for(var s of D(u))G.call(u,s)&&w(_,s,u[s]);return _},$=(_,u)=>V(_,H(u));import{i as O,u as J,j as Q,k as d,l as x,m as p,T as f,n as W,p as X,r as L,o as r,q as c,s as F,w as E,c as b,a as Y,t as e,K as Z,v,x as k,y as o,z as ss,A as g,B as T,F as os,C as es,D as ts,E as ns,G as is}from"./vendor.1af84381.js";import{_ as S}from"./loading.ae9c4f02.js";import{_ as as}from"./sub.f0b346da.js";import{_ as ls}from"./comment.17c56d6e.js";import{_ as us}from"./share.56451215.js";import{_ as rs,s as _s,g as I}from"./index.efd36ddd.js";import{d as ds}from"./download.b524dcdf.js";var cs="/assets/stop_icon.f272f983.svg",gs="/assets/play_icon.971b473f.svg",ps="/assets/list_icon.82c00d89.svg",vs="/assets/circulate_gray.91b2c30b.svg",ms="/assets/circulate_random_gray.6d9ef32b.svg",fs="/assets/circulate_one_gray.cd22f14b.svg",hs="/assets/collect_gray.f1b40daf.svg",ys="/assets/finger.bd88e2ba.svg",Cs="/assets/delete_gray.de068543.svg",Fs="/assets/delete.f02346d1.svg",Es="/assets/cover-bg-in.c5a56a3e.png",bs="/assets/download_gray.ec9df863.svg",ks="/assets/singer.b8c9cb78.svg",Bs="/assets/album.86b904fe.svg",Ds="/assets/cloud.ca8a16e8.svg",ws="/assets/lingsheng.6ca203ba.svg",As="/assets/buy.4891d408.svg",$s="/assets/hide.ed379cee.svg";const l=_=>(ns("data-v-580f5a75"),_=_(),is(),_),xs={class:"home"},Ls={key:0,class:"songDiv"},Ts=["src"],Ss={class:"info"},Is={class:"song_name"},js={class:"song_author"},Ps={key:0,src:cs,alt:""},Rs={key:1,src:gs,alt:""},zs=["onClick"],Ms={class:"pop_list"},qs={class:"title"},Us={class:"option"},Ns={key:0,class:"circulate"},Vs=l(()=>o("span",null,"\u5217\u8868\u5FAA\u73AF",-1)),Hs={key:1,class:"circulate"},Ks=l(()=>o("span",null,"\u968F\u673A\u64AD\u653E",-1)),Gs={key:2,class:"circulate"},Os=l(()=>o("span",null,"\u5355\u66F2\u5FAA\u73AF",-1)),Js={class:"get"},Qs=l(()=>o("img",{src:hs,alt:""},null,-1)),Ws=l(()=>o("img",{class:"finger",src:ys,alt:""},null,-1)),Xs=l(()=>o("span",null,"\u6536\u85CF\u5168\u90E8",-1)),Ys={class:"list"},Zs=["onClick"],so={class:"icon"},oo={key:0,src:S,alt:""},eo=l(()=>o("span",null,"\xA0-\xA0",-1)),to={class:"author"},no=["onClick"],io={key:0,class:"load"},ao=l(()=>o("img",{src:S,alt:""},null,-1)),lo=l(()=>o("span",null,"\u52A0\u8F7D\u4E2D...",-1)),uo=[ao,lo],ro={class:"song_detail"},_o={class:"info"},co={class:"img"},go=["src"],po={class:"title"},vo={class:"author"},mo=l(()=>o("img",{style:{"border-radius":"50%"},src:Es,alt:""},null,-1)),fo=l(()=>o("span",null,"\u4E0B\u4E00\u9996\u64AD\u653E",-1)),ho=[mo,fo],yo=l(()=>o("div",{class:"item"},[o("img",{src:as,alt:""}),o("span",null,"\u6536\u85CF\u5230\u6B4C\u5355")],-1)),Co=l(()=>o("img",{src:bs,alt:""},null,-1)),Fo=l(()=>o("span",null,"\u4E0B\u8F7D",-1)),Eo=[Co,Fo],bo=l(()=>o("img",{src:ls,alt:""},null,-1)),ko=l(()=>o("div",{class:"item"},[o("img",{src:us,alt:""}),o("span",null,"\u5206\u4EAB")],-1)),Bo={class:"item"},Do=l(()=>o("img",{src:ks,alt:""},null,-1)),wo={class:"item"},Ao=l(()=>o("img",{src:Bs,alt:""},null,-1)),$o=l(()=>o("div",{class:"item"},[o("img",{src:Ds,alt:""}),o("span",null,"\u4E91\u8D1D\u63A8\u6B4C")],-1)),xo=l(()=>o("div",{class:"item"},[o("img",{src:ws,alt:""}),o("span",null,"\u8BBE\u7F6E\u94C3\u58F0")],-1)),Lo=l(()=>o("div",{class:"item"},[o("img",{src:As,alt:""}),o("span",null,"\u5355\u66F2\u8D2D\u4E70")],-1)),To=l(()=>o("div",{class:"item"},[o("img",{src:$s,alt:""}),o("span",null,"\u5C4F\u853D\u6B4C\u66F2\u6216\u8005\u6B4C\u624B")],-1)),So={name:"home"};function Io(_){const u=J();Q(),d(0);const s=_s(),n=d(new Audio);d(),d(),d(),d(),d();let C=d();d("00:00.00"),x([]),d();const B=d(""),h=x(["song","discover"]);function j(){s.play(!s.song_info.isPlaying)}const P=()=>{u.push({path:"/song"})};function R(){C.value=setInterval(()=>{s.set_song_time(n.value.currentTime),s.set_song_allTime(n.value.duration)},1e3)}p(()=>s.song_info.isPlaying,(a,t)=>{a?(n.value.src||(n.value.src=s.song_info.url),n.value.autoplay=!0,n.value.play(),R()):(n.value.pause(),clearInterval(C.value))}),p(()=>s.song_info.id,async(a,t)=>{if(a){n.value.pause(),f.loading({message:"\u83B7\u53D6\u97F3\u4E50\u4E2D\uFF0C\u8BF7\u7A0D\u540E",overlay:!0,duration:0,forbidClick:!0});const m=await I(s.song_info.id,s.song_info.type);f.clear(),s.set_song_url(m.data[0].url),n.value.src=s.song_info.url,n.value.play(),s.play(!0),s.song_info.id&&s.lyricRequest()}}),p(()=>s.song_info.progressTime,()=>{n.value.currentTime=s.song_info.progressTime}),p(()=>u.currentRoute.value,(a,t)=>{if(s.set_load(!1),a.meta.level>t.meta.level){if(t.name=="song")return;h.push(a.name),B.value="slide-left"}else h.splice(h.indexOf(t.name),1),B.value="slide-right"}),p(()=>s.song_info.currentTime,a=>{s.song_info.lyricAll.forEach((t,m,y)=>{a>=t.time&&a<=y[m+1].time&&s.set_lyric(t.lyric)})}),p(()=>s.song_info.volume,a=>{n.value.volume=s.song_info.volume}),p(()=>s.song_info.lyric,a=>{console.info(`%c > ${a.replace("<br>"," > ")}`,"color:#db2c1f;background:rgba(0,0,0,0.2);font-size:25px;border-radius:6px")}),W(async()=>{if(s.song_info.id){const a=await I(s.song_info.id);s.set_song_url(a.data[0].url),s.song_info.list.length==0&&s.add_song({id:s.song_info.id,name:s.song_info.name,author:s.song_info.author,img:s.song_info.img,url:s.song_info.url})}localStorage.getItem("songId")&&f("\u53D1\u73B0\u4E0A\u6B21\u64AD\u653E\u6570\u636E\uFF0C\u52A0\u5165\u64AD\u653E\u5217\u8868"),n.value.preload="auto",n.value.load(),n.value.addEventListener("progress",()=>{if(s.set_song_allTime(n.value.duration),n.value.buffered.length>0){let a=n.value.buffered.end(n.value.buffered.length-1);s.set_song_buffered(a)}}),n.value.addEventListener("loadstart",()=>{}),n.value.addEventListener("error",()=>{s.play(!1),f.fail("\u6570\u636E\u7F13\u51B2\u5931\u8D25")}),n.value.addEventListener("stalled",()=>{s.song_info.isPlaying&&f("\u5F53\u524D\u7F51\u7EDC\u8F83\u5DEE"),s.song_info.duration||s.set_song_allTime(0)}),n.value.addEventListener("waiting",()=>{}),n.value.addEventListener("play",()=>{console.info("%c > console \u6B4C\u8BCD\u7CFB\u7EDF\u5DE5\u4F5C ing","color:#db2c1f;background:rgba(0,0,0,0.2);font-size:25px;border-radius:6px")}),n.value.addEventListener("pause",()=>{}),n.value.addEventListener("ended",()=>{s.play(!1),s.play_next(null)}),n.value.addEventListener("ready",()=>{}),s.song_info.id&&s.lyricRequest(),window.addEventListener("popstate",()=>{setTimeout(()=>{let a=sessionStorage.getItem("scrollTop");a&&window.scrollTo(0,parseInt(a))},520)})});const z=d("slide");z.value="slide-left",X(()=>{clearInterval(C.value)});const M=()=>{s.set_pop_list(!0)},q=a=>{s.close(),u.push({path:"/comment",query:{id:a}})};return(a,t)=>{const m=L("router-view"),y=L("van-popup");return r(),c("div",xs,[F(m,null,{default:E(({Component:i})=>[(r(),b(Z,{include:e(h)},[(r(),b(Y(i)))],1032,["include"]))]),_:1}),e(s).song_info.id&&e(u).currentRoute.value.name!="song"?(r(),c("div",Ls)):v("",!0),e(u).currentRoute.value.name!="song"?(r(),c("div",{key:1,class:k(["song",{fixed_out:!e(s).song_info.id}]),onClick:t[1]||(t[1]=i=>P())},[o("div",{class:"song_img rotate",style:ss({animationPlayState:e(s).song_info.isPlaying?"running":"paused"})},[o("img",{src:e(s).song_info.img,alt:""},null,8,Ts)],4),o("div",Ss,[o("div",Is,g(e(s).song_info.name),1),o("div",js,"-"+g(e(s).song_info.author),1)]),o("div",{class:"icon",onClick:t[0]||(t[0]=T(i=>j(),["stop"]))},[e(s).song_info.isPlaying?(r(),c("img",Ps)):(r(),c("img",Rs))]),o("img",{onClick:T(M,["stop"]),src:ps,alt:""},null,8,zs)],2)):v("",!0),F(y,{show:e(s).showList,"onUpdate:show":t[6]||(t[6]=i=>e(s).showList=i),"lock-scroll":!1,round:"",onClose:t[7]||(t[7]=i=>e(s).close()),"close-on-popstate":!0,position:"bottom",style:{height:"50%"}},{default:E(()=>[o("div",Ms,[o("div",qs,"\u5F53\u524D\u64AD\u653E\u5217\u8868("+g(e(s).song_info.list.length)+")",1),o("div",Us,[e(s).song_info.playMode==1?(r(),c("div",Ns,[o("img",{onClick:t[2]||(t[2]=i=>e(s).set_circulate()),src:vs,alt:""}),Vs])):v("",!0),e(s).song_info.playMode==2?(r(),c("div",Hs,[o("img",{onClick:t[3]||(t[3]=i=>e(s).set_circulate()),src:ms,alt:""}),Ks])):v("",!0),e(s).song_info.playMode==3?(r(),c("div",Gs,[o("img",{onClick:t[4]||(t[4]=i=>e(s).set_circulate()),src:fs,alt:""}),Os])):v("",!0),o("div",Js,[Qs,Ws,Xs,o("img",{class:"del_list",onClick:t[5]||(t[5]=i=>e(s).delete_all()),src:Cs,alt:""})])]),o("div",Ys,[(r(!0),c(os,null,es(e(s).song_info.list,i=>(r(),c("div",{class:"item",key:i.id},[o("div",{class:k({info:!0,red:i.id==e(s).song_info.id}),onClick:U=>e(s).play_by_id(i.id)},[o("div",so,[i.id==e(s).song_info.id?(r(),c("img",oo)):v("",!0)]),o("span",{class:k({name:!0,red:i.id==e(s).song_info.id})},g(i.name),3),eo,o("span",to,g(i.author),1)],10,Zs),o("img",{class:"delete",onClick:U=>e(s).delete(i.id),src:Fs,alt:""},null,8,no)]))),128))])])]),_:1},8,["show"]),(r(),b(ts,{to:"#app"},[e(s).showLoading?(r(),c("div",io,uo)):v("",!0)])),F(y,{show:e(s).showDetail,"onUpdate:show":t[11]||(t[11]=i=>e(s).showDetail=i),round:"",onClose:t[12]||(t[12]=i=>e(s).close()),"close-on-popstate":!0,position:"bottom",style:{height:"50%"}},{default:E(()=>[o("div",ro,[o("div",_o,[o("div",co,[o("img",{src:e(s).song_pop_detail.img,alt:""},null,8,go)]),o("div",po,[o("span",null,"\u6B4C\u66F2\uFF1A"+g(e(s).song_pop_detail.name),1),o("span",vo,g(e(s).song_pop_detail.author),1)])]),o("div",{class:"item",onClick:t[8]||(t[8]=i=>e(s).add_song(e(s).song_pop_detail))},ho),yo,o("div",{class:"item",onClick:t[9]||(t[9]=i=>e(ds)(e(s).song_pop_detail.url,{id:e(s).song_pop_detail.id,name:e(s).song_pop_detail.name,author:e(s).song_pop_detail.author}))},Eo),o("div",{class:"item",onClick:t[10]||(t[10]=i=>q(e(s).song_pop_detail.id.toString()))},[bo,o("span",null,"\u8BC4\u8BBA\uFF08"+g(e(s).song_pop_detail.commentCount)+"\uFF09",1)]),ko,o("div",Bo,[Do,o("span",null,"\u6B4C\u624B\uFF1A"+g(e(s).song_pop_detail.author),1)]),o("div",wo,[Ao,o("span",null,"\u4E13\u8F91\uFF1A"+g(e(s).song_pop_detail.al),1)]),$o,xo,Lo,To])]),_:1},8,["show"])])}}const jo=O($(A({},So),{setup:Io}));var Ho=rs(jo,[["__scopeId","data-v-580f5a75"]]);export{Ho as default};

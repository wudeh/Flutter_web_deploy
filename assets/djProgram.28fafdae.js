var U=Object.defineProperty,q=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var j=(d,i,n)=>i in d?U(d,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[i]=n,I=(d,i)=>{for(var n in i||(i={}))N.call(i,n)&&j(d,n,i[n]);if(w)for(var n of w(i))R.call(i,n)&&j(d,n,i[n]);return d},F=(d,i)=>q(d,M(i));import{_ as T}from"./left_arrow.037609f2.js";import{_ as V,a as z,b as G}from"./playAll.304df0c4.js";import{_ as H}from"./sub.f0b346da.js";import{_ as J}from"./comment.17c56d6e.js";import{_ as K}from"./share.56451215.js";import{_ as O}from"./loading.ae9c4f02.js";import{_ as Q}from"./songInfo.ee9e09a9.js";import{i as W,u as X,k as Y,l as L,H as Z,r as k,o as c,q as _,y as s,t,s as f,A as r,v as b,F as A,C as x,x as S,w as ss,E as os,G as ts,T as as}from"./vendor.1af84381.js";import{_ as ns,s as es,h as is,i as ls,g as rs}from"./index.3f139752.js";import{n as v,g as ds}from"./num.de8f9d34.js";const m=d=>(os("data-v-2106a7ab"),d=d(),ts(),d),cs={class:"top"},_s={class:"img_blur"},us=["src"],ms={class:"navSongList"},gs=m(()=>s("img",{src:T,alt:""},null,-1)),ps=[gs],fs=m(()=>s("div",{class:"title"},"\u64AD\u5355",-1)),vs=m(()=>s("div",{class:"search"},[s("img",{src:z,alt:""})],-1)),hs={class:"info"},ys={class:"avatar"},Cs={class:"detail"},ks={class:"title"},bs={class:"person"},ws={class:"name"},js={key:0,class:"Follow"},Is={key:1,class:"notFollow"},Fs={class:"text"},Ls={class:"count"},As={class:"sub item"},xs={key:0,src:G,alt:""},Ss={key:1,src:H,alt:""},Ds=m(()=>s("div",{class:"line"},null,-1)),Es=m(()=>s("img",{src:J,alt:""},null,-1)),$s=m(()=>s("div",{class:"line"},null,-1)),Bs={class:"share item"},Ps=m(()=>s("img",{src:K,alt:""},null,-1)),Us={class:"playAll"},qs=m(()=>s("div",{class:"text"},[s("div",{class:"play_all_title"},"\u64AD\u653E\u5168\u90E8")],-1)),Ms={key:0,class:"play_count"},Ns={class:"index"},Rs={key:0,width:"18",src:O,alt:""},Ts={key:1},Vs=["onClick"],zs={class:"info_top"},Gs={class:"song_name"},Hs={class:"info_bottom"},Js=["onClick"],Ks=m(()=>s("img",{src:Q,alt:""},null,-1)),Os=[Ks],Qs={class:"title"},Ws={key:0,class:"babel"},Xs=m(()=>s("span",null,"\u6807\u7B7E\uFF1A",-1)),Ys={name:"djProgram"};function Zs(d){const i=X(),n=es(),D=Y(),o=L({numFilter:v,title:"",img:"",description:"",tags:[],subscribed:!1,songListInfo:[],shareCount:0,subscribedCount:0,commentCount:0,asc:!1,show:!1}),g=L({avatar:"",nickname:"",userId:"",followed:!1}),y=i.currentRoute.value.query.id;Z(async()=>{n.set_load(!0);const a=await is(y);o.title=a.data.name,o.img=a.data.picUrl,o.description=a.data.desc,o.subscribed=a.data.subed,o.subscribedCount=a.data.subCount,o.commentCount=a.data.commentCount,o.shareCount=a.data.shareCount,g.avatar=a.data.dj.defaultAvatar?a.data.dj.defaultAvatar:a.data.dj.avatarUrl,g.userId=a.data.dj.userId,g.nickname=a.data.dj.nickname,g.followed=a.data.dj.followed;let e=await ls(y,o.asc);o.songListInfo=o.songListInfo.concat(e.programs);let p=e.programs.map(u=>u.id);const C=await rs(p.join(","));o.songListInfo.splice(0),e.programs.forEach((u,l)=>{o.songListInfo.push({id:u.mainSong.id,name:u.mainSong.name,author:u.dj.nickname,playCount:v(u.listenerCount),duration:ds(u.duration/1e3),url:C[l],img:u.coverUrl})}),n.set_load(!1)});function E(a){if(a.id==n.song_info.id){n.play(!n.song_info.isPlaying);return}if(a.resourceId!=n.song_info.id){n.play(!1);let e={id:a.id,type:4,name:a.name,author:a.author,url:a.url,img:a.img,al:a.al.name};n.setSongInfo(e)}}const $=()=>{if(o.songListInfo.length==0){as("\u8FD8\u672A\u83B7\u53D6\u5230\u97F3\u4E50\u5217\u8868\uFF0C\u8BF7\u7A0D\u540E");return}let a=[];o.songListInfo.forEach((e,p)=>{a.push({id:e.id,type:0,name:e.name,author:e.author,img:e.img})}),n.add_songList(a)},B=(a,e)=>{a.type=e,n.set_pop_detail(a)};return(a,e)=>{const p=k("van-image"),C=k("van-icon"),u=k("van-overlay");return c(),_("div",{class:S({first_div:!0,first_div_song_height:t(n).song_info.id})},[s("div",cs,[s("div",_s,[s("img",{src:t(o).img,alt:""},null,8,us)]),s("div",ms,[s("div",{class:"left_arrow",onClick:e[0]||(e[0]=l=>t(i).go(-1))},ps),fs,vs]),s("div",hs,[s("div",ys,[f(p,{radius:"8",class:"img",src:t(o).img},null,8,["src"])]),s("div",Cs,[s("div",ks,r(t(o).title),1),s("div",bs,[f(p,{radius:"50%",class:"img",src:t(g).avatar},null,8,["src"]),s("span",ws,r(t(g).nickname),1),t(g).followed?(c(),_("span",js,">")):(c(),_("span",Is,"+"))]),t(o).description?(c(),_("div",{key:0,class:"des",onClick:e[1]||(e[1]=l=>t(o).show=!0)},[s("div",Fs,r(t(o).description),1),f(C,{name:"arrow"})])):b("",!0)])])]),s("div",Ls,[s("div",As,[t(o).subscribed?(c(),_("img",xs)):(c(),_("img",Ss)),s("span",null,r(t(v)(t(o).subscribedCount)),1)]),Ds,s("div",{class:"comment item",onClick:e[2]||(e[2]=l=>t(i).push({path:"/comment",query:{id:t(y),type:4}}))},[Es,s("span",null,r(t(v)(t(o).commentCount)),1)]),$s,s("div",Bs,[Ps,s("span",null,r(t(v)(t(o).shareCount)),1)])]),s("div",Us,[s("div",{class:"icon"},[s("img",{onClick:$,src:V,alt:""})]),qs,t(o).songListInfo.length?(c(),_("div",Ms,"("+r(t(o).songListInfo.length)+")",1)):b("",!0)]),s("div",{class:S(["songList",{songList_no_bar:!t(n).song_info.id}])},[(c(!0),_(A,null,x(t(o).songListInfo,(l,h)=>(c(),_("div",{class:"song_item",key:h},[s("div",Ns,[l.id==t(n).song_info.id?(c(),_("img",Rs)):(c(),_("span",Ts,r(t(o).songListInfo.length-h),1))]),s("div",{class:"song_info",onClick:P=>E(l)},[s("div",zs,[s("div",Gs,r(l.name),1)]),s("div",Hs,"\u64AD\u653E\u91CF\uFF1A"+r(l.playCount)+"\xA0 \u65F6\u957F\uFF1A"+r(l.duration)+"\xA0 by\uFF1A"+r(l.author),1)],8,Vs),s("div",{class:"more",onClick:P=>B(l,4)},Os,8,Js)]))),128))],2),f(u,{show:t(o).show,onClick:e[4]||(e[4]=l=>t(o).show=!1),"lock-scroll":!1},{default:ss(()=>[s("div",{class:"wrapper",onClick:e[3]||(e[3]=l=>t(o).show=!1)},[f(p,{radius:"8",class:"img",src:D.value},null,8,["src"]),s("span",Qs,r(t(o).title),1),t(o).tags.length?(c(),_("div",Ws,[Xs,(c(!0),_(A,null,x(t(o).tags,(l,h)=>(c(),_("span",{class:"babel_item",key:h},r(l),1))),128))])):b("",!0),s("p",null,r(t(o).description),1)])]),_:1},8,["show"])],2)}}const so=W(F(I({},Ys),{setup:Zs}));var mo=ns(so,[["__scopeId","data-v-2106a7ab"]]);export{mo as default};

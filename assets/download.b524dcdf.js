import{s as i}from"./index.efd36ddd.js";import{T as s}from"./vendor.1af84381.js";function c(e,t){if(!e){s("\u8FD8\u672A\u83B7\u53D6\u5230\u4E0B\u8F7D\u94FE\u63A5\uFF0C\u8BF7\u7A0D\u540E");return}if(e.indexOf("http://")>=0||e.indexOf("https://")>=0){let l="";location.protocol==="https:"?l=e.replace("http://","https://"):l=e;let d=e.split("."),p=d[d.length-1];s(`${t.name} \u5F00\u59CB\u4E0B\u8F7D`);var o=new XMLHttpRequest;o.open("GET",l,!0),o.responseType="blob",o.onload=function(u){if(u.target.readyState===4&&u.target.status===200){let a=this.response,r=window.URL.createObjectURL(new Blob([a])),n=document.createElement("a");n.download=`${t.name}.${p}`,n.href=r,n.style.display="none",document.body.appendChild(n),n.click(),n.remove()}},o.send(),o.addEventListener("progress",function(u){if(u.lengthComputable){let a=u.loaded/u.total*100;i().download_progress({id:t.id,name:t.name,author:t.author,progress:a.toFixed(2)}),a>=100&&s(`${t.name} \u4E0B\u8F7D\u6210\u529F`)}else s.fail("\u5F53\u524D\u97F3\u4E50\u5DF2\u5728\u4E0B\u8F7D\uFF0C\u4F46\u65E0\u6CD5\u83B7\u53D6\u4E0B\u8F7D\u8FDB\u5EA6")},!1),o.onerror=function(){console.log("<-----\u6587\u4EF6\u4E0B\u8F7D\u5931\u8D25----->")}}}export{c as d};
